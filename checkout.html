<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MONO - No 1 Men's Wear</title>
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico" />
    <meta name="title" content="MONO - No 1 Men's Wear" />
    <meta
      name="description"
      content="Elevate your style with our premium selection of men's fashion. From sleek casuals to sharp formalwear, MONO offers timeless designs and impeccable quality for the modern man who values sophistication and individuality."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/" />
    <meta property="og:title" content="MONO - No 1 Men's Wear" />
    <meta
      property="og:description"
      content="Elevate your style with our premium selection of men's fashion. From sleek casuals to sharp formalwear, MONO offers timeless designs and impeccable quality for the modern man who values sophistication and individuality."
    />
    <meta property="og:image" content="/assets/img/banner.png" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="/" />
    <meta property="twitter:title" content="MONO - No 1 Men's Wear" />
    <meta
      property="twitter:description"
      content="Elevate your style with our premium selection of men's fashion. From sleek casuals to sharp formalwear, MONO offers timeless designs and impeccable quality for the modern man who values sophistication and individuality."
    />
    <meta property="twitter:image" content="/assets/img/banner.png" />

    <link rel="stylesheet" href="assets/css/global.css" />

    <!-- TAILWIND CSS PLAYCDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  </head>
  <body>
    <div id="navbar"></div>

    <div class="min-h-screen max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div
        id="breadcrumb"
        class="flex flex-wrap items-center justify-center gap-4 mb-8"
      >
        <a href="/" class="text-zinc-600 hover:underline">Home</a>
        <span>/</span>
        <a href="/shop.html" class="text-zinc-600 hover:underline">Shop</a>
        <span>/</span>
        <a href="/cart.html" class="text-zinc-600 hover:underline">Cart</a>
        <span>/</span>
        <a>Checkout</a>
      </div>

      <div
        id="empty-cart-section"
        class="hidden items-center justify-center min-h-[calc(100vh-200px)]"
      >
        <div class="text-center">
          <img
            src="/assets/img/empty-cart.png"
            alt="Empty Cart"
            class="mb-8 w-64 opacity-50"
          />
          <p class="text-zinc-500 mb-8">Your cart is currently empty.</p>
          <a
            href="shop.html"
            class="bg-black hover:bg-zinc-700 text-white font-semibold py-4 px-8 transition duration-300 ease-in-out"
          >
            Browse Our Collection
          </a>
        </div>
      </div>

      <div
        id="checkout-section"
        class="flex flex-col md:flex-row md:gap-8 space-y-8 md:space-y-0"
      >
        <div
          class="flex flex-col gap-8 w-full md:w-1/2 order-2 md:order-1 mt-8 md:mt-0"
        >
          <div class="flex flex-col gap-4">
            <h3 class="text-2xl font-semibold">Contact</h3>

            <input
              type="email"
              placeholder="Your Email Address"
              class="w-full border p-4 focus:outline-none"
            />
            <div class="flex items-center">
              <input
                id="subcribe-checkbox"
                class="w-4 h-4 accent-black"
                type="checkbox"
              />

              <label
                for="subcribe-checkbox"
                class="mx-2 text-sm font-medium text-zinc-700"
                >Email me with news and offers</label
              >
            </div>
          </div>

          <div class="flex flex-col gap-4">
            <h3 class="text-2xl font-semibold">Shipping Address</h3>

            <div class="flex items-center gap-4">
              <input
                type="text"
                placeholder="First Name"
                class="w-full border p-4 focus:outline-none"
              />
              <input
                type="text"
                placeholder="Last Name"
                class="w-full border p-4 focus:outline-none"
              />
            </div>

            <input
              type="text"
              placeholder="Address"
              class="w-full border p-4 focus:outline-none"
            />

            <div class="flex items-center gap-4">
              <input
                type="text"
                placeholder="Postal Code"
                class="w-full border p-4 focus:outline-none"
              />
              <input
                type="text"
                placeholder="City"
                class="w-full border p-4 focus:outline-none"
              />
            </div>

            <input
              type="tel"
              placeholder="Phone Number"
              class="w-full border p-4 focus:outline-none"
            />
          </div>

          <div class="flex flex-col gap-4">
            <h3 class="text-2xl font-semibold">Payment</h3>
            <span class="text-sm text-zinc-700 -mt-2"
              >All transactions are secure and encrypted</span
            >

            <div class="flex flex-col">
              <div
                class="payment-option flex items-center justify-between p-4 border"
              >
                <div class="flex items-center">
                  <input
                    id="credit-card-payment"
                    class="w-4 h-4 accent-black"
                    name="payment"
                    type="radio"
                  />

                  <label
                    for="credit-card-payment"
                    class="mx-2 text-sm font-medium text-zinc-700"
                    >Credit Card</label
                  >
                </div>

                <div class="flex gap-2">
                  <img
                    src="/assets/img/mastercard.webp"
                    class="h-8 border rounded"
                  />
                  <img src="/assets/img/visa.jpg" class="h-8 border rounded" />
                  <img src="/assets/img/gpn.jpeg" class="h-8 border rounded" />
                </div>
              </div>

              <div
                class="payment-option flex items-center justify-between p-4 border"
              >
                <div class="flex items-center">
                  <input
                    id="paypal-payment"
                    class="w-4 h-4 accent-black"
                    name="payment"
                    type="radio"
                  />

                  <label
                    for="paypal-payment"
                    class="mx-2 text-sm font-medium text-zinc-700"
                    >Paypal</label
                  >
                </div>

                <img src="/assets/img/paypal.png" class="h-8" />
              </div>

              <div
                class="payment-option flex items-center justify-between p-4 border"
              >
                <div class="flex items-center">
                  <input
                    id="cash-on-delivery-payment"
                    class="w-4 h-4 accent-black"
                    name="payment"
                    type="radio"
                  />
                  <label
                    for="cash-on-delivery-payment"
                    class="mx-2 text-sm font-medium text-zinc-700"
                    >Cash on Delivery</label
                  >
                </div>

                <img src="/assets/img/cash-on-delivery.webp" class="h-6" />
              </div>
            </div>
          </div>

          <button class="bg-black text-center text-white py-4 mt-4">
            Pay Now
          </button>
        </div>
        <div class="w-full md:w-1/2 p-4 md:p-8 bg-zinc-100 order-1 md:order-2">
          <div id="cart-products-container" class="flex flex-col gap-4"></div>

          <div class="flex flex-col gap-2 py-16">
            <div class="flex items-center justify-between">
              <span class="text-zinc-700">Subtotal</span>
              <span id="subtotal" class="font-medium"></span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-zinc-700">Shipping</span>
              <span id="shipping" class="font-medium"></span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-zinc-700">Tax</span>
              <span id="tax" class="font-medium"></span>
            </div>
            <div class="flex items-center justify-between py-8">
              <span class="font-medium text-lg">Total</span>
              <span id="total" class="font-semibold text-xl"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="footer"></div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script src="/assets/components/navbar.js"></script>
    <script src="/assets/components/footer.js"></script>
    <script src="/assets/components/product-card.js"></script>

    <script src="/assets/js/navbar.js"></script>

    <script type="module">
      import { getProductById } from "/assets/js/product.js";
      import { formatPrice } from "/assets/js/utils.js";
      import { getCartItemCount, getCartProducts } from "/assets/js/cart.js";

      const navbar = new Navbar({ cartCount: getCartItemCount() });
      document.getElementById("navbar").innerHTML = navbar.render();

      const footer = new Footer();
      document.getElementById("footer").innerHTML = footer.render();

      const cartProductsContainer = document.getElementById(
        "cart-products-container"
      );

      let cartProducts = getCartProducts();
      let subtotal = 0;
      let shipping = 30000;
      let taxRate = 0.11;
      let tax = 0;
      let total = 0;

      function renderCheckoutPage() {
        if (cartProducts.length === 0) {
          const emptyCartSection =
            document.getElementById("empty-cart-section");
          emptyCartSection.classList.remove("hidden");
          emptyCartSection.classList.add("flex");

          const cardDetailsSection = document.getElementById("cart-details");
          cardDetailsSection.classList.add("hidden");

          return;
        }

        cartProductsContainer.innerHTML = "";

        cartProducts.map((cartProduct) => {
          const product = getProductById(parseInt(cartProduct.id));

          const selectedVariant = product.variant.find(
            (variant) => variant.name === cartProduct.color
          );

          subtotal = subtotal + product.discountedPrice * cartProduct.quantity;

          const cartProductRow = document.createElement("div");
          cartProductRow.classList.add(
            "flex",
            "flex-row",
            "w-full",
            "items-center",
            "justify-between"
          );
          cartProductRow.innerHTML = `
            <div class="relative flex-shrink-0 w-28">
              <img
                src="${selectedVariant.images[0]}"
                class="w-24 h-24 object-cover"
              />

              <div
                class="absolute top-0 right-0 bg-black -mt-2 text-white text-xs font-medium rounded-full w-6 h-6 flex items-center justify-center"
              >
                ${cartProduct.quantity}
              </div>
            </div>

            <div
              class="flex w-3/4 flex-col ml-2 lg:mg-0 lg:flex-row justify-between items-start lg:items-center"
            >
              <div class="flex flex-col w-full lg:w-3/4">
                <span>${product.name}</span>
                <span class="text-sm text-zinc-700"
                  >Color: ${cartProduct.color} &bull; Size: ${
            cartProduct.size
          }</span
                >
              </div>

              <div class="mt-2 lg:mt-0">
                <span>${formatPrice(
                  product.discountedPrice * cartProduct.quantity
                )}</span>
              </div>
            </div>
          `;

          tax = parseInt((subtotal + shipping) * taxRate);
          total = subtotal + shipping + tax;

          document.getElementById("subtotal").textContent =
            formatPrice(subtotal);
          document.getElementById("shipping").textContent =
            formatPrice(shipping);
          document.getElementById("tax").textContent = formatPrice(tax);
          document.getElementById("total").textContent = formatPrice(total);

          cartProductsContainer.appendChild(cartProductRow);
        });
      }

      document.querySelectorAll(".payment-option").forEach((box) => {
        box.addEventListener("click", function () {
          const radio = this.querySelector('input[type="radio"]');
          if (radio) {
            radio.checked = true;
          }
        });
      });

      document.addEventListener("DOMContentLoaded", () => {
        renderCheckoutPage();
      });

      lucide.createIcons();
      AOS.init();
    </script>
  </body>
</html>
